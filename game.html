<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.js"></script>
    <style id="compiled-css" type="text/css">
        body {
            /*from   w w w .ja v  a 2  s.  co  m*/
            background-color: ivory;
        }

        #canvas {
            border: 1px solid red;
        }
    </style>
    <script type="text/javascript">
        $(window).load(function () {
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            var $canvas = $("#canvas");
            var canvasOffset = $canvas.offset();
            var offsetX = canvasOffset.left;
            var offsetY = canvasOffset.top;
            var scrollX = $canvas.scrollLeft();
            var scrollY = $canvas.scrollTop();
            var rects = [];
            var board = [
                {file: 0, rank: 0, is_ocupied: null},
                {file: 0, rank: 1, is_ocupied: null},
                {file: 0, rank: 2, is_ocupied: null},
                {file: 0, rank: 3, is_ocupied: null},
                {file: 0, rank: 4, is_ocupied: null},
                {file: 0, rank: 5, is_ocupied: null},
                {file: 0, rank: 6, is_ocupied: null},
                {file: 0, rank: 7, is_ocupied: null},
                {file: 1, rank: 0, is_ocupied: null},
                {file: 1, rank: 1, is_ocupied: null},
                {file: 1, rank: 2, is_ocupied: null},
                {file: 1, rank: 3, is_ocupied: null},
                {file: 1, rank: 4, is_ocupied: null},
                {file: 1, rank: 5, is_ocupied: null},
                {file: 1, rank: 6, is_ocupied: null},
                {file: 1, rank: 7, is_ocupied: null},
                {file: 2, rank: 0, is_ocupied: null},
                {file: 2, rank: 1, is_ocupied: null},
                {file: 2, rank: 2, is_ocupied: null},
                {file: 2, rank: 3, is_ocupied: null},
                {file: 2, rank: 4, is_ocupied: null},
                {file: 2, rank: 5, is_ocupied: null},
                {file: 2, rank: 6, is_ocupied: null},
                {file: 2, rank: 7, is_ocupied: null},
                {file: 3, rank: 0, is_ocupied: null},
                {file: 3, rank: 1, is_ocupied: null},
                {file: 3, rank: 2, is_ocupied: null},
                {file: 3, rank: 3, is_ocupied: null},
                {file: 3, rank: 4, is_ocupied: null},
                {file: 3, rank: 5, is_ocupied: null},
                {file: 3, rank: 6, is_ocupied: null},
                {file: 3, rank: 7, is_ocupied: null},
                {file: 4, rank: 0, is_ocupied: null},
                {file: 4, rank: 1, is_ocupied: null},
                {file: 4, rank: 2, is_ocupied: null},
                {file: 4, rank: 3, is_ocupied: null},
                {file: 4, rank: 4, is_ocupied: null},
                {file: 4, rank: 5, is_ocupied: null},
                {file: 4, rank: 6, is_ocupied: null},
                {file: 4, rank: 7, is_ocupied: null},
                {file: 5, rank: 0, is_ocupied: null},
                {file: 5, rank: 1, is_ocupied: null},
                {file: 5, rank: 2, is_ocupied: null},
                {file: 5, rank: 3, is_ocupied: null},
                {file: 5, rank: 4, is_ocupied: null},
                {file: 5, rank: 5, is_ocupied: null},
                {file: 5, rank: 6, is_ocupied: null},
                {file: 5, rank: 7, is_ocupied: null},
                {file: 6, rank: 0, is_ocupied: null},
                {file: 6, rank: 1, is_ocupied: null},
                {file: 6, rank: 2, is_ocupied: null},
                {file: 6, rank: 3, is_ocupied: null},
                {file: 6, rank: 4, is_ocupied: null},
                {file: 6, rank: 5, is_ocupied: null},
                {file: 6, rank: 6, is_ocupied: null},
                {file: 6, rank: 7, is_ocupied: null},
                {file: 7, rank: 0, is_ocupied: null},
                {file: 7, rank: 1, is_ocupied: null},
                {file: 7, rank: 2, is_ocupied: null},
                {file: 7, rank: 3, is_ocupied: null},
                {file: 7, rank: 4, is_ocupied: null},
                {file: 7, rank: 5, is_ocupied: null},
                {file: 7, rank: 6, is_ocupied: null},
                {file: 7, rank: 7, is_ocupied: null}
            ]

            var drawnBoard = board.map(function (cell) {
                return {
                    rank: cell.rank,
                    file: cell.file,
                    is_ocupied: cell.is_ocupied,
                    x: cell.rank * 100,
                    y: cell.file * 100,
                    width: 100,
                    height: 100,
                    fillcolor: (cell.rank + cell.file ) % 2 == 0 ? "white" : "black",
                    cellType: (cell.rank + cell.file ) % 2 == 0 ? "white" : "black",
                    isFilled: true
                }
            })
            draw(drawnBoard);

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for (var i = 0; i < drawnBoard.length; i++) {
                    var rect = drawnBoard[i];
                    if (rect.isFilled) {
                        ctx.fillStyle = rect.fillcolor;
                        ctx.fillRect(rect.x, rect.y, rect.width, rect.height);
                    }
                    ctx.strokeStyle = "black";
                    ctx.strokeRect(rect.x, rect.y, rect.width, rect.height);
                }
            }

            function hit(rect, x, y) {
                return (x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height);
            }

            function handleMouseDown(e, rects) {
                e.preventDefault();
                mouseX = parseInt(e.clientX - offsetX);
                mouseY = parseInt(e.clientY - offsetY);
                for (var i = 0; i < drawnBoard.length; i++) {
                    var rect = drawnBoard[i];
                    if (hit(rect, mouseX, mouseY)) {
                        rect.fillcolor = rect.fillcolor == "red" ? rect.cellType:"red"
                    }
                }
                draw();
            }
            $("#canvas").mousedown(function (e) {
                handleMouseDown(e);
            });
        });

    </script>
</head>

<body>
    <h4>Click on a "menu" rect to toggle.</h4>
    <canvas id="canvas" width="800" height="800"></canvas>
</body>

</html>
